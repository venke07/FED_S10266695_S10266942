<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Details</title>
    <link rel="stylesheet" href="product-details.css">
    <link rel="stylesheet" href="style.css">
</head>
<body class="product-details-page">
    <header>
        <div class="logo"><a href="index.html">MokeSell</a></div>
        <nav>
            <ul class="menu">
                <li><a href="index.html">Home</a></li>
                <li><a href="products.html">Products</a></li>
                <li><a href="#">Discounts</a></li>
                <li><a href="contactus.html">Contact Us</a></li>
            </ul>
        </nav>
        <div class="header-icons">
            <button id="sell-btn" class="sell-btn">
                <a class="sell-link" href="selling.html">+Sell</a>
            </button>
            <div class="header-icons">
                <input type="text" placeholder="Search" class="search-bar">
                <img src="images/bell.png" alt="Notification Bell" class="icon">
                <a href="favourites.html">
                    <img src="images/heart.png" alt="Heart" class="icon">
                </a>
                <img src="images/chat.png" alt="Messages" class="icon">
                <a href="profile.html">
                    <img id="profile-icon" src="images/profile.png" alt="Profile" class="icon" style="display: none;">
                </a>
                <button id="login-btn" class="login-btn">
                    <a class="login-link" href="login.html">Log In / Sign Up</a>
                </button>
            </div>
        </div>
    </header>

    <div class="product-container">
        <!-- Image Gallery -->
        <div class="image-gallery">
            <div class="main-image">
                <img id="mainImage" src="" alt="Main Product Image">
            </div>
            <div class="thumbnail-container">
                <!-- Thumbnails will be populated by JavaScript -->
            </div>
        </div>

        <!-- Product Information -->
        <div class="product-info">
            <h1 id="productName">Product Name</h1>
            <p id="productPrice" class="price">Product Price</p>
            
            <h2>Description</h2>
            <p id="productDescription" class="description">Product Description</p>

            <h2>Detailed Description</h2>
            <p id="detailedDescription" class="detailed-description">Detailed Description</p>
            
            <h2>Condition</h2>
            <p id="productCondition" class="condition">Product Condition</p>

            <h2>Location</h2>
            <p id="productLocation" class="location">Product Location</p>
            
            <!-- Action Buttons -->
            <div class="action-buttons">
                <button class="chat-btn" onclick="openChat()">
                    <img src="images/chat.png" alt="Chat">
                    Talk with Seller
                </button>
                <button class="favorite-btn" onclick="toggleFavorite()">
                    <img src="images/heart.png" alt="Favorite">
                </button>
            </div>

            <!-- Seller Information -->
            <div class="seller-info">
                <h2>Seller Information</h2>
                <div class="seller-profile">
                    <img id="sellerImage" src="" alt="Seller">
                    <div class="seller-details">
                        <p id="sellerName">Seller Name</p>
                        <p id="lastActive">Last Active</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="product.js"></script>
    <script src="cart.js"></script>
    <script src="product-load.js"></script>
    <script src="liking.js"></script>
 
    <script>
        // Add login check functionality
        document.addEventListener('DOMContentLoaded', function() {
            const userId = localStorage.getItem('userId');
            const profileIcon = document.getElementById('profile-icon');
            const loginBtn = document.getElementById('login-btn');

            if (userId) {
                profileIcon.style.display = 'block';
                loginBtn.style.display = 'none';
            } else {
                profileIcon.style.display = 'none';
                loginBtn.style.display = 'block';
            }

            // Load product details based on productId
            const urlParams = new URLSearchParams(window.location.search);
            const productId = urlParams.get('productId');
            const product = productDatabase[productId];

            if (product) {
                document.getElementById('productName').textContent = product.name;
                document.getElementById('productPrice').textContent = product.price;
                document.getElementById('productDescription').textContent = product.description;
                document.getElementById('detailedDescription').textContent = product.detailedDescription;
                document.getElementById('productCondition').textContent = product.condition;
                document.getElementById('productLocation').textContent = product.location;
                document.getElementById('sellerName').textContent = product.seller.name;
                document.getElementById('lastActive').textContent = product.seller.lastActive;
                document.getElementById('mainImage').src = product.images[0];
                document.getElementById('mainImage').alt = product.name;
                document.getElementById('sellerImage').src = product.seller.image;
                document.getElementById('sellerImage').alt = product.seller.name;

                const thumbnailContainer = document.querySelector('.thumbnail-container');
                thumbnailContainer.innerHTML = '';
                product.images.forEach((image, index) => {
                    const thumbnail = document.createElement('img');
                    thumbnail.className = 'thumbnail';
                    thumbnail.src = image;
                    thumbnail.alt = `Thumbnail ${index + 1}`;
                    thumbnail.onclick = () => changeImage(index);
                    thumbnailContainer.appendChild(thumbnail);
                });
            } else {
                // Hardcoded information for the three products
                const hardcodedProducts = {
                    "jeep-ew121": {
                        name: "Jeep EW121 True Wireless Bluetooth 5.4",
                        price: "$199.99",
                        description: "High-quality wireless earbuds with Bluetooth 5.4 technology, offering superior sound quality and long battery life.",
                        detailedDescription: "These Jeep EW121 earbuds provide an immersive audio experience with noise cancellation and a comfortable fit. Perfect for music lovers and on-the-go professionals.",
                        condition: "Brand New",
                        location: "VivoCity",
                        seller: {
                            name: "Alice Smith",
                            image: "images/profile.png",
                            lastActive: "2 hours ago"
                        },
                        images: ["images/laptop(1).webp"]
                    },
                    "samsung-galaxy-s21-ultra": {
                        name: "Samsung Galaxy S21 Ultra 5G",
                        price: "$999.99",
                        description: "The latest Samsung flagship smartphone with advanced camera system and 5G connectivity.",
                        detailedDescription: "Experience the ultimate performance with the Samsung Galaxy S21 Ultra 5G. Featuring a stunning display, powerful processor, and a versatile camera setup for professional-grade photography.",
                        condition: "Brand New",
                        location: "Wild wild wet",
                        seller: {
                            name: "Bob Johnson",
                            image: "images/profile.png",
                            lastActive: "1 hour ago"
                        },
                        images: ["images/S21.png"]
                    },
                    "apple-macbook-pro-16": {
                        name: "Apple MacBook Pro 16-inch",
                        price: "$2,399.00",
                        description: "High-performance laptop with a 16-inch Retina display, powerful processors, and advanced graphics.",
                        detailedDescription: "The Apple MacBook Pro 16-inch is designed for professionals who need top-tier performance. With its stunning Retina display, fast processors, and advanced graphics, it's perfect for creative work and demanding tasks.",
                        condition: "Brand New",
                        location: "JEM",
                        seller: {
                            name: "Charlie Brown",
                            image: "images/profile.png",
                            lastActive: "30 minutes ago"
                        },
                        images: ["images/macbook.png"]
                    }
                };

                const hardcodedProduct = hardcodedProducts[productId];
                if (hardcodedProduct) {
                    document.getElementById('productName').textContent = hardcodedProduct.name;
                    document.getElementById('productPrice').textContent = hardcodedProduct.price;
                    document.getElementById('productDescription').textContent = hardcodedProduct.description;
                    document.getElementById('detailedDescription').textContent = hardcodedProduct.detailedDescription;
                    document.getElementById('productCondition').textContent = hardcodedProduct.condition;
                    document.getElementById('productLocation').textContent = hardcodedProduct.location;
                    document.getElementById('sellerName').textContent = hardcodedProduct.seller.name;
                    document.getElementById('lastActive').textContent = hardcodedProduct.seller.lastActive;
                    document.getElementById('mainImage').src = hardcodedProduct.images[0];
                    document.getElementById('mainImage').alt = hardcodedProduct.name;
                    document.getElementById('sellerImage').src = hardcodedProduct.seller.image;
                    document.getElementById('sellerImage').alt = hardcodedProduct.seller.name;

                    const thumbnailContainer = document.querySelector('.thumbnail-container');
                    thumbnailContainer.innerHTML = '';
                    hardcodedProduct.images.forEach((image, index) => {
                        const thumbnail = document.createElement('img');
                        thumbnail.className = 'thumbnail';
                        thumbnail.src = image;
                        thumbnail.alt = `Thumbnail ${index + 1}`;
                        thumbnail.onclick = () => changeImage(index);
                        thumbnailContainer.appendChild(thumbnail);
                    });
                }
            }
        });

        function openChat() {
            const urlParams = new URLSearchParams(window.location.search);
            const productId = urlParams.get('productId');
            window.location.href = `chat.html?productId=${productId}`;
        }
    </script>
</body>
</html>